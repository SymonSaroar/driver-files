<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
 <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-110109-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-110109-1');
</script>
<script type="text/javascript" src="../common/version.js"></script>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<meta name="description" content="WDC_IntEnable"/>
<title>Jungo WinDriver: WDC_IntEnable</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-main.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="wd_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Jungo WinDriver
   &#160;
   <span id="projectnumber"></span>
   </div>
   <div id="projectbrief">Official Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('wdc__lib_8h_a0de3da14960f4ffc8d02350506808c4c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="contents">
<a id="a0de3da14960f4ffc8d02350506808c4c" name="a0de3da14960f4ffc8d02350506808c4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0de3da14960f4ffc8d02350506808c4c">&#9670;&nbsp;</a></span>WDC_IntEnable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DWORD <a class="el" href="windrvr_8h_abd951991ce3a6320fb0d1eee9350d35d.html#abd951991ce3a6320fb0d1eee9350d35d">DLLCALLCONV</a> WDC_IntEnable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="windrvr_8h_aa74f89aa7d942f4a79ea12d7c9b763ef.html#aa74f89aa7d942f4a79ea12d7c9b763ef">_In_</a> <a class="el" href="wdc__lib_8h_afe93a4914e351fedf921e137fa525e7f.html#afe93a4914e351fedf921e137fa525e7f">WDC_DEVICE_HANDLE</a>&#160;</td>
          <td class="paramname"><em>hDev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="windrvr_8h_aa74f89aa7d942f4a79ea12d7c9b763ef.html#aa74f89aa7d942f4a79ea12d7c9b763ef">_In_</a> <a class="el" href="structWD__TRANSFER.html">WD_TRANSFER</a> *&#160;</td>
          <td class="paramname"><em>pTransCmds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="windrvr_8h_aa74f89aa7d942f4a79ea12d7c9b763ef.html#aa74f89aa7d942f4a79ea12d7c9b763ef">_In_</a> DWORD&#160;</td>
          <td class="paramname"><em>dwNumCmds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="windrvr_8h_aa74f89aa7d942f4a79ea12d7c9b763ef.html#aa74f89aa7d942f4a79ea12d7c9b763ef">_In_</a> DWORD&#160;</td>
          <td class="paramname"><em>dwOptions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="windrvr_8h_aa74f89aa7d942f4a79ea12d7c9b763ef.html#aa74f89aa7d942f4a79ea12d7c9b763ef">_In_</a> <a class="el" href="windrvr__int__thread_8h_a109fc8d5a7a2eb3f9da419185ec11b74.html#a109fc8d5a7a2eb3f9da419185ec11b74">INT_HANDLER</a>&#160;</td>
          <td class="paramname"><em>funcIntHandler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="windrvr_8h_aa74f89aa7d942f4a79ea12d7c9b763ef.html#aa74f89aa7d942f4a79ea12d7c9b763ef">_In_</a> PVOID&#160;</td>
          <td class="paramname"><em>pData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="windrvr_8h_aa74f89aa7d942f4a79ea12d7c9b763ef.html#aa74f89aa7d942f4a79ea12d7c9b763ef">_In_</a> BOOL&#160;</td>
          <td class="paramname"><em>fUseKP</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enables interrupt handling for the device. </p>
<p >On Linux and Windows, when attempting to enable interrupts for a PCI device that supports Extended Message-Signaled Interrupts (MSI-X) or Message-Signaled Interrupts (MSI) (and was installed with a relevant INF file on Windows), the function first tries to enable MSI-X or MSI; if this fails, or if the target OS does not support MSI/MSI-X, the function attempts to enable legacy level-sensitive interrupts (if supported by the device). On Linux, you can use the function's dwOptions parameter to specify the types of PCI interrupts that may be enabled for the device (see the explanation in the parameter description). For other types of hardware (PCI with no MSI/MSI-X support / ISA), the function attempts to enable the legacy interrupt type supported by the device (Level Sensitive / Edge Triggered)</p>
<p >If the caller selects to handle the interrupts in the kernel, using a Kernel PlugIn driver, the Kernel PlugIn KP_IntAtIrql (legacy interrupts) or KP_IntAtIrqlMSI (MSI/MSI-X) function, which runs at high interrupt request level (IRQL), will be invoked immediately when an interrupt is received.</p>
<p >The function can receive transfer commands information, which will be performed by WinDriver at the kernel, at high IRQ level, when an interrupt is received. If a Kernel PlugIn driver is used to handle the interrupts, any transfer commands set by the caller will be executed by WinDriver after the Kernel PlugIn KP_IntAtDpc or KP_IntAtDpcMSI function completes its execution.</p>
<p >When handling level-sensitive interrupts (such as legacy PCI interrupts) from the user mode, without a Kernel PlugIn driver, you must prepare and pass to the function transfer commands for acknowledging the interrupt. When using a Kernel PlugIn driver, the information for acknowledging the interrupts should be implemented in the Kernel PlugIn KP_IntAtIrql function, so the transfer commands in the call to <a class="el" href="wdc__lib_8h_a0de3da14960f4ffc8d02350506808c4c.html#a0de3da14960f4ffc8d02350506808c4c" title="Enables interrupt handling for the device.">WDC_IntEnable()</a> are not required (although they can still be used).</p>
<p >The function receives a user-mode interrupt handler routine, which will be called by WinDriver after the kernel-mode interrupt processing is completed. If the interrupts are handled using a Kernel PlugIn driver, the return value of the Kernel PlugIn deferred interrupt handler function KP_IntAtDpc (legacy interrupts) or KP_IntAtDpcMSI (MSI/MSI-X) will determine how many times (if at all) the user-mode interrupt handler will be called (provided KP_IntAtDpc or KP_IntAtDpcMSI itself is executed which is determined by the return value of the Kernel PlugIn KP_IntAtIrql or KP_IntAtIrqlMSI function).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">hDev</td><td>Handle to a WDC device, returned by WDC_xxxDeviceOpen() </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pTransCmds</td><td>An array of transfer commands information structures that define the operations to be performed at the kernel level upon the detection of an interrupt, or NULL if no transfer commands are required.<ul>
<li>NOTE: Memory allocated for the transfer commands must remain available until the interrupts are disabled When handling level-sensitive interrupts (such as legacy PCI interrupts) without a Kernel PlugIn, you must use this array to define the hardware-specific commands for acknowledging the interrupts in the kernel, immediately when they are received.</li>
<li>For an explanation on how to set the transfer commands, refer to the description of <a class="el" href="structWD__TRANSFER.html">WD_TRANSFER</a> in Section B.7.10, and to the explanation in Section 9.3.6. </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dwNumCmds</td><td>Number of transfer commands in the pTransCmds array </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dwOptions</td><td>A bit mask of interrupt handling flags can be set to zero for no options, or to a combination of any of the following flags: INTERRUPT_CMD_COPY: If set, WinDriver will copy any data read in the kernel as a result of a read transfer command, and return it to the user within the relevant transfer command structure. The user will be able to access the data from his user-mode interrupt handler routine (funcIntHandler).<ul>
<li>The following flags are applicable only to PCI interrupts on Linux. If set, these flags determine the types of interrupts that may be enabled for the device the function will attempt to enable only interrupts of the specified types, using the following precedence order, provided the type is reported as supported by the device:</li>
<li>INTERRUPT_MESSAGE_X: Extended Message-Signaled Interrupts (MSI-X)</li>
<li>INTERRUPT_MESSAGE: Message-Signaled Interrupts (MSI)</li>
<li>INTERRUPT_LEVEL_SENSITIVE Legacy level-sensitive interrupts</li>
<li>INTERRUPT_DONT_GET_MSI_MESSAGE: Do not read the msi message from the card. </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">funcIntHandler</td><td>A user-mode interrupt handler callback function, which will be executed after an interrupt is received and processed in the kernel. (The prototype of the interrupt handler INT_HANDLER is defined in <a class="el" href="windrvr__int__thread_8h.html">windrvr_int_thread.h</a>). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pData</td><td>Data for the user-mode interrupt handler callback routine (funcIntHandler) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fUseKP</td><td>If TRUE The device's Kernel PlugIn driver's KP_IntAtIrql or KP_IntAtIrqlMSI function, which runs at high interrupt request level (IRQL), will be executed immediately when an interrupt is received. The Kernel PlugIn driver to be used for the device is passed to WDC_xxxDeviceOpen() and stored in the WDC device structure. If the caller also passes transfer commands to the function (pTransCmds), these commands will be executed by WinDriver at the kernel, at high IRQ level, after KP_IntAtIrql or KP_IntAtIrqlMSI completes its execution. If the high-IRQL handler returns TRUE, the Kernel PlugIn deferred interrupt processing routine KP_IntAtDpc or KP_IntAtDpcMSI will be invoked. The return value of this function determines how many times (if at all) the user-mode interrupt handler (funcIntHandler) will be executed once the control returns to the user mode. If FALSE When an interrupt is received, any transfer commands set by the user in pTransCmds will be executed by WinDriver at the kernel, at high IRQ level and the user-mode interrupt handler routine (funcIntHandler) will be executed when the control returns to the user mode. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns WD_STATUS_SUCCESS (0) on success, or an appropriate error code otherwise</dd></dl>
<p>For more detailed information about interrupt handling, please refer to handling_interrupts</p>
<p >For a sample user-mode interrupt handling code, please refer to sample_user-mode_windriver_interrupt_handling_code </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_ef532da7b7e0496c177e9eedcbdec673.html">include</a></li><li class="navelem"><a class="el" href="wdc__lib_8h.html">wdc_lib.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
